# プロフィール画面実装戦略

## 必要なAPIエンドポイント

### 読み込み系
- `GET /v1/auth/me` - 現在のユーザー情報取得
- `GET /v1/companies/{companyId}` - 企業情報取得
- `GET /v1/employees/{employeeId}` - 従業員詳細情報取得

### 更新系
- `PATCH /v1/companies/{companyId}` - 企業情報更新

## 必要なテーブル

- **EMPLOYEES** - 従業員情報（名前、メール、権限など）
- **COMPANIES** - 企業基本情報
- **COMPANY_INFO** - 企業詳細情報（住所、電話、ロゴ、印鑑など）
- **AUTHORITIES** - 権限情報
- **LOGIN_INFOS** - ログイン情報

## 画面設計（ASCII）

```
┌─────────────────────────────────────────────────────────────────────┐
│                             プロフィール設定                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─ ユーザー情報 ─────────────────────────────────────────────────┐  │
│  │                                                               │  │
│  │  氏名：        [田中 太郎                    ] (読み取り専用)  │  │
│  │  メールアドレス：[tanaka@example.com          ] (読み取り専用)  │  │
│  │  権限：        [管理者                       ] (読み取り専用)  │  │
│  │  初回ログイン：  □ はい  (読み取り専用)                        │  │
│  │                                                               │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌─ 企業情報 ─────────────────────────────────────────────────────┐  │
│  │                                                               │  │
│  │  企業名：      [株式会社サンプル              ]  [更新]         │  │
│  │  住所1：       [東京都渋谷区                  ]  [更新]         │  │
│  │  住所2：       [1-1-1 サンプルビル            ]  [更新]         │  │
│  │  電話番号：    [03-1234-5678                 ]  [更新]         │  │
│  │  見積備考：    [────────────────────────────] [更新]         │  │
│  │               [標準の見積書備考欄テキスト      ]               │  │
│  │               [────────────────────────────]               │  │
│  │                                                               │  │
│  │  ┌─ ロゴ・印鑑設定 ─────────────────────────────────────────┐  │  │
│  │  │                                                         │  │  │
│  │  │  会社ロゴ：  [────────────]  [ファイル選択] [削除]       │  │  │
│  │  │             │ [LOGO_IMG]    │                         │  │  │
│  │  │             [────────────]                         │  │  │
│  │  │                                                         │  │  │
│  │  │  会社印鑑：  [────────────]  [ファイル選択] [削除]       │  │  │
│  │  │             │ [SEAL_IMG]    │                         │  │  │
│  │  │             [────────────]                         │  │  │
│  │  │                                                         │  │  │
│  │  └─────────────────────────────────────────────────────────┘  │  │
│  │                                                               │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌─ プランプオン ─────────────────────────────────────────────────┐  │
│  │                                                               │  │
│  │  現在のプラン：  [スタンダードプラン           ] (読み取り専用)  │  │
│  │  契約期間：      [2024/01/01 - 2024/12/31     ] (読み取り専用)  │  │
│  │  編集者数：      [5人                         ] (読み取り専用)  │  │
│  │  閲覧者数：      [20人                        ] (読み取り専用)  │  │
│  │  図面上限：      [1000枚                      ] (読み取り専用)  │  │
│  │  ステータス：    [アクティブ                  ] (読み取り専用)  │  │
│  │                                                               │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│                                    [全体を保存]                      │
└─────────────────────────────────────────────────────────────────────┘
```

## 実装方針

### 1. データ取得フロー
1. 初期ロード時に `GET /v1/auth/me` でユーザー情報取得
2. 取得したユーザー情報のcompanyIdを使って `GET /v1/companies/{companyId}` で企業情報取得
3. プラン情報も同時に表示

### 2. 更新フロー  
1. 各セクションごとに[更新]ボタンを配置
2. 更新時は `PATCH /v1/companies/{companyId}` を使用
3. ファイル（ロゴ・印鑑）のアップロードは別エンドポイントが必要（要確認）

### 3. フォーム状態管理
- React Hook Form使用を推奨
- 各セクション独立した更新が可能
- バリデーション実装

### 4. セキュリティ考慮
- ファイルアップロード時の形式・サイズ制限
- 権限チェック（企業情報更新権限の確認）
- 入力値のサニタイゼーション