# AIチャットボット実装戦略 - パターン01

## 要件概要
- 右下に小さな丸いAIチャットボタンを配置
- クリック時に右側1/4に展開されるチャットパネル
- GeminiライクなチャットUI
- 現状はダミーでOK

## 技術的実装戦略

### 1. アーキテクチャ設計

#### コンポーネント構成
```
src/components/feature/blueprint-detail/01/
├── ChatButton.tsx         # 浮動チャットボタン
├── ChatPanel.tsx          # メインチャットパネル
├── ChatMessage.tsx        # 個別メッセージコンポーネント
├── ChatInput.tsx          # メッセージ入力エリア
├── types.ts               # TypeScript型定義
└── index.tsx              # メインコンポーネント（既存のblueprint-detailにチャット機能を統合）
```

#### 状態管理
- React useState/useReducer for local state
- チャット開閉状態の管理
- メッセージ履歴の管理
- 送信中状態の管理

### 2. UI/UX設計

#### 浮動ボタン
- **位置**: `fixed bottom-6 right-6`
- **サイズ**: 56px x 56px (Material Design準拠)
- **デザイン**: 円形、影付き、AIアイコン付き
- **アニメーション**: ホバー時の拡大、パルス効果

#### チャットパネル
- **位置**: 画面右側1/4 (width: 25vw, min-width: 320px)
- **高さ**: フルスクリーン高さ
- **背景**: 白背景、影付き
- **アニメーション**: 右からスライドイン/アウト

#### Geminiライクな要素
- **メッセージバブル**: 
  - ユーザー: 右寄せ、青系背景
  - AI: 左寄せ、グレー系背景
- **アバター**: AIメッセージに小さなアイコン
- **入力エリア**: 下部固定、送信ボタン付き
- **タイピングインジケーター**: AI応答時のアニメーション

### 3. レスポンシブ対応

#### デスクトップ (>1024px)
- 浮動ボタン: 右下固定
- チャットパネル: 画面右側1/4

#### タブレット (768px-1024px)
- 浮動ボタン: 右下固定
- チャットパネル: 画面右側1/3

#### モバイル (<768px)
- 浮動ボタン: 右下固定
- チャットパネル: フルスクリーンオーバーレイ

### 4. 実装詳細

#### チャット開閉制御
```typescript
const [isChatOpen, setIsChatOpen] = useState(false);
const [messages, setMessages] = useState<Message[]>([]);

const toggleChat = () => setIsChatOpen(!isChatOpen);
```

#### メッセージ型定義
```typescript
interface Message {
  id: string;
  content: string;
  sender: 'user' | 'ai';
  timestamp: Date;
  isTyping?: boolean;
}
```

#### アニメーション実装
- Framer Motion または CSS Transitions
- スライドイン/アウト
- フェードイン/アウト
- タイピングアニメーション

### 5. ダミーデータ実装

#### 初期会話例
```typescript
const dummyMessages: Message[] = [
  {
    id: '1',
    content: 'こんにちは！図面に関して何かお手伝いできることはありますか？',
    sender: 'ai',
    timestamp: new Date()
  }
];
```

#### 自動応答ロジック
- 簡単なキーワードマッチング
- 図面関連の質問に対する定型応答
- ランダムディレイでリアルさを演出

### 6. 将来拡張性

#### API統合準備
- メッセージ送信のインターフェース定義
- 応答待ちの状態管理
- エラーハンドリング

#### 機能拡張ポイント
- ファイルアップロード対応
- 音声入力対応
- 図面解析結果の表示
- 履歴保存機能

### 7. パフォーマンス考慮

#### 最適化ポイント
- チャットパネルの遅延ロード
- 仮想スクロール（メッセージ大量時）
- メッセージの部分更新
- 画像の遅延読み込み

### 8. アクセシビリティ

#### 対応項目
- キーボードナビゲーション
- スクリーンリーダー対応
- 高コントラストモード
- フォーカス管理

## 実装優先度

1. **Phase 1**: 基本UI構築（浮動ボタン + パネル）
2. **Phase 2**: ダミーチャット機能
3. **Phase 3**: アニメーション実装
4. **Phase 4**: レスポンシブ対応
5. **Phase 5**: アクセシビリティ向上

この戦略に基づき、段階的に実装を進めることで、拡張性とメンテナンス性を保ちながら要件を満たすAIチャットボット機能を構築できます。