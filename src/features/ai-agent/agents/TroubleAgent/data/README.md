# TroubleAgent データ抽出ガイド

このドキュメントでは、スクリーンショットからTroubleAgentのデータベースに追加する情報の抽出方法を説明します。

## データ構造

### 基本構造
```json
{
  "documents": [
    {
      "document_id": "DOC-YYYY-XXXXXX",
      "document_name": "文書名",
      "customer": "顧客名",
      "pages": [
        {
          "page_number": 1,
          "trouble": { "exists": false },
          "estimate": { "exists": false },
          "specification": { "exists": false }
        }
      ]
    }
  ]
}
```

## 情報タイプ別の抽出方法

### 1. トラブル情報 (trouble)

**存在する場合:**
```json
{
  "trouble": {
    "exists": true,
    "date": "YYYY-MM-DD",
    "text": "トラブルの概要",
    "detail": {
      "cause": "原因",
      "solution": "解決方法",
      "downtime": "ダウンタイム",
      "cost": "費用",
      "parts": "使用部品"
    }
  }
}
```

**抽出ポイント:**
- トラブル発生日
- トラブルの概要説明
- 原因分析
- 解決方法・対応内容
- ダウンタイム時間
- 修理費用
- 交換部品情報

### 2. 見積もり情報 (estimate)

**存在する場合:**
```json
{
  "estimate": {
    "exists": true,
    "content": {
      "項目": "作業内容",
      "金額": "見積金額",
      "工期": "作業期間",
      "材料費": "材料費用",
      "工賃": "作業費用",
      "諸経費": "その他費用",
      "合計": "総額"
    }
  }
}
```

**抽出ポイント:**
- 見積項目名
- 各項目の金額
- 作業工期
- 材料費・工賃の内訳
- 合計金額

### 3. 仕様書情報 (specification)

**存在する場合:**
```json
{
  "specification": {
    "exists": true,
    "content": {
      "設備名": {
        "仕様項目1": "値1",
        "仕様項目2": "値2"
      },
      "運転条件": {
        "温度": "範囲",
        "圧力": "値"
      }
    }
  }
}
```

**抽出ポイント:**
- 設備の技術仕様
- 運転条件
- 性能値
- 寸法・重量
- 電気仕様
- 安全装置

## データ抽出の手順

### Step 1: ページ分析
1. スクリーンショットを確認
2. ページ番号を特定
3. どのタイプの情報が含まれているかを判断

### Step 2: 情報抽出
1. **トラブル情報**: 故障・異常・修理に関する情報
2. **見積もり情報**: 金額・費用・工期に関する情報  
3. **仕様書情報**: 技術仕様・性能・条件に関する情報

### Step 3: データ形式化
1. 抽出した情報を上記のJSON形式に変換
2. 存在しない情報は `"exists": false` に設定
3. 日付は "YYYY-MM-DD" 形式で記録

## 注意事項

- **日付形式**: 必ず "YYYY-MM-DD" 形式で記録
- **金額**: カンマ区切りで記録（例: "150,000円"）
- **単位**: 適切な単位を付けて記録
- **存在しない場合**: `"exists": false` を設定
- **一貫性**: 同じ種類の情報は統一された形式で記録

## 例

### トラブル情報の例
```json
{
  "trouble": {
    "exists": true,
    "date": "2024-01-15",
    "text": "主軸ベアリング異音発生",
    "detail": {
      "cause": "ベアリング摩耗",
      "solution": "ベアリング交換",
      "downtime": "12時間",
      "cost": "850,000円",
      "parts": "SKF 23240CC"
    }
  }
}
```

### 見積もり情報の例
```json
{
  "estimate": {
    "exists": true,
    "content": {
      "ベアリング代": "650,000円",
      "工賃": "150,000円",
      "諸経費": "50,000円",
      "合計": "850,000円",
      "工期": "2日"
    }
  }
}
```

### 仕様書情報の例
```json
{
  "specification": {
    "exists": true,
    "content": {
      "主軸": {
        "直径": "φ200mm",
        "回転数": "1500 rpm"
      },
      "ベアリング": {
        "型式": "SKF 23240CC",
        "内径": "200mm",
        "外径": "360mm"
      }
    }
  }
}
``` 